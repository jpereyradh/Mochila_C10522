(("undefined"!==typeof self?self:this).webpackJsonp=("undefined"!==typeof self?self:this).webpackJsonp||[]).push([[8],{251:function(t,e,i){"use strict";i.d(e,"e",(function(){return o})),i.d(e,"c",(function(){return d})),i.d(e,"a",(function(){return h})),i.d(e,"d",(function(){return v})),i.d(e,"b",(function(){return g})),i.d(e,"f",(function(){return b}));var s=i(610),a=i.n(s),r=i(3);r.a.MediaRecorder&&r.a.MediaRecorder.prototype.pause||(r.a.MediaRecorder=a.a);const o="undefined"!==typeof MediaRecorder,n=["audio/webm","audio/ogg","audio/wav","audio/mp4"],l=['video/webm;codecs="vp9,opus"','video/webm;codecs="vp9,vorbis"','video/webm;codecs="vp8,opus"','video/webm;codecs="vp8,vorbis"','video/webm;codecs="h264"',"video/webm","video/mpeg","video/mp4"],c=o&&MediaRecorder.isTypeSupported?MediaRecorder.isTypeSupported.bind(MediaRecorder):()=>!1,d=(()=>{if(!o)return"";for(const t of l)if(c(t))return t;return""})(),h=(()=>{if(!o)return"";for(const t of n)if(c(t))return t;return""})(),[u]=d.split(";"),[,p]=u.split("/"),v=p,g=h.split("/").pop(),b=!!v},319:function(t,e,i){"use strict";var s=i(2),a=i(436),r=function(t,e,i,s){var a,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var n=t.length-1;n>=0;n--)(a=t[n])&&(o=(r<3?a(o):r>3?a(e,i,o):a(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},o=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let n=class extends s.f{constructor(){super(...arguments),this.file=null,this.uploading=!1,this.maxFileUploadSize=0}close(){}handleFile(t){this.file=t,this.upload?this.uploading=!0:this.$emit("upload-file",this.file,this.maxFileUploadSize)}handleCaption(t){t&&this.$emit("caption",t)}onUploadCancel(){this.close(),this.uploading=!1}onUploadDone(t,e){this.$emit("select",e)}beforeDestroy(){this.uploading=!1}};r([Object(s.e)({default:!0}),o("design:type",Boolean)],n.prototype,"upload",void 0),n=r([Object(s.a)({components:{InterstitialUploader:a.a}})],n),e.a=n},321:function(t,e,i){},336:function(t,e,i){"use strict";var s,a,r,o,n=i(2),l=i(20),c=function(t,e,i,s){var a,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var n=t.length-1;n>=0;n--)(a=t[n])&&(o=(r<3?a(o):r>3?a(e,i,o):a(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},d=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};!function(t){t.default="default",t.small="small"}(s||(s={})),function(t){t.default="default",t.caps="caps"}(a||(a={})),function(t){t.none="none",t.fit="fit",t.scroll="scroll"}(r||(r={})),function(t){t.none="none",t.fit="fit"}(o||(o={}));let h=class extends n.f{get containerClasses(){const t=["tabs-container"];return this.widthFitting===r.scroll&&t.push("scroll-width"),this.widthFitting===r.fit&&t.push("fit-width"),this.heightFitting===o.fit&&t.push("fit-height"),this.size===s.small&&t.push("tabs-small"),this.font===a.caps&&t.push("tabs-caps"),t}onTabClick(t){this.clickHandler?this.clickHandler(t.key):Object(l.p)(t.href)}};c([Object(n.e)({default:()=>[]}),d("design:type",Array)],h.prototype,"tabs",void 0),c([Object(n.e)({default:null}),d("design:type",Object)],h.prototype,"activeKey",void 0),c([Object(n.e)({default:r.fit}),d("design:type",Object)],h.prototype,"widthFitting",void 0),c([Object(n.e)({default:o.fit}),d("design:type",Object)],h.prototype,"heightFitting",void 0),c([Object(n.e)({default:s.default}),d("design:type",Object)],h.prototype,"size",void 0),c([Object(n.e)({default:a.caps}),d("design:type",Object)],h.prototype,"font",void 0),c([Object(n.e)({default:null}),d("design:type",Object)],h.prototype,"clickHandler",void 0),h=c([n.a],h);var u=h,p=(i(477),i(5)),v=Object(p.a)(u,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{class:t.containerClasses,attrs:{role:"tablist"}},t._l(t.tabs,(function(e){return i("li",{key:e.key,class:{tab:!0,"is-active":e.key===t.activeKey},attrs:{title:e.text,role:"tab","aria-selected":e.key===t.activeKey},on:{click:function(i){return t.onTabClick(e)}}},[i("div",{staticClass:"text"},[t._v(t._s(e.text))])])})),0)}),[],!1,null,"3c26e775",null);e.a=v.exports},370:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));const s=t=>{const e=(new DOMParser).parseFromString(t,"text/html").querySelector("iframe,img");return e?e.src:null}},371:function(t,e,i){"use strict";var s=i(75),a=i(217),r=i(469),o=i(609),n=i.n(o),l=i(251);const c={data:()=>({activeAudioDeviceId:null,activeVideoDeviceId:null,audioDevices:[],durationMs:0,maxDuration:60,bufferDuration:0,recordedChunks:[],recording:!1,recordingOptions:{},recordingStatus:"notstarted",recordingStartTimeMs:null,secondsElapsed:0,streaming:!1,videoDevices:[]}),computed:{constraints(){},hasChunks(){return"notstarted"!=this.recordingStatus},hasRecordedChunks(){return this.recordedChunks.length>0&&"notstarted"!=this.recordingStatus},hasReachedRecordingLimit(){return this.secondsElapsed>=this.maxDuration+this.bufferDuration},isReachingRecordingLimit(){},recordingButtonTitle(){return this.hasChunks?this.__("Resume recording"):this.__("Start recording")},recordingDurationText(){return Object(r.a)(this.secondsElapsed)}},watch:{hasReachedRecordingLimit(t){t&&this.pauseRecording()}},methods:{chooseAudioDevice(t){if(this.activeAudioDeviceId=t.target.value,"no_audio"!==t.target.value){const t=this.audioDevices.find(t=>t.id===this.activeAudioDeviceId).label;localStorage.setItem("activeAudioDeviceName",t)}this.streaming&&this.$nextTick(this.restartStreaming.bind(this))},chooseVideoDevice(t){this.activeVideoDeviceId=t.target.value;const e=this.videoDevices.find(t=>t.id===this.activeVideoDeviceId).label;localStorage.setItem("activeVideoDeviceName",e),this.$nextTick(this.restartStreaming.bind(this))},_gotRecordedData(t){this.recordingStatus="stopped",this.recordedChunks=this.recordedChunks.concat([t.data]),this.gotRecordedData()},gotRecordedData(){},gotDevices(t){const e=[],i=[];if(t)for(let o of t){let t=o.deviceId,s=o.label,a=o.kind;"videoinput"===a?e.push({id:t,label:s}):"audioinput"==a&&i.push({id:t,label:s})}this.videoDevices=e,this.audioDevices=i;let s=!1;const a=localStorage.getItem("activeVideoDeviceName")||null,r=localStorage.getItem("activeAudioDeviceName")||null;if(this.constraints.audio&&r){const t=i.find(t=>t.label===r);t&&(t.id===this.activeAudioDeviceId||(this.activeAudioDeviceId=t.id,s=!0))}if(this.constraints.video&&a){const t=e.find(t=>t.label===a);t&&(t.id===this.activeVideoDeviceId||(this.activeVideoDeviceId=t.id,s=!0))}s&&this.restartStreaming()},_gotStream(t){if(this.streaming=!0,this._stream=t,this.constraints.video){const e=t.getVideoTracks()[0];if(e.addEventListener("ended",()=>{this.stopRecording()}),e&&"function"==typeof e.getSettings){const t=e.getSettings();t.deviceId&&(this.activeVideoDeviceId=t.deviceId)}}if(this.constraints.audio){const e=t.getAudioTracks()[0];if(e&&"function"==typeof e.getSettings){const t=e.getSettings();t.deviceId&&(this.activeAudioDeviceId=t.deviceId)}}this.gotStream(t)},gotStream(t){},errorGettingStream(t){console.error(t)},mountRecording(t){this.recordingOptions="audio"==t?{mimeType:l.a}:{mimeType:l.c}},mountScreenStreaming(){if(this.isElectronApp){const t={audio:!1,video:this.constraints.video};navigator.mediaDevices.getUserMedia(t).then(t=>{if(!this.constraints.audio)return void this._gotStream(t);const e=Object(a.b)();e&&!this.audioDevices.length&&e.requestMic(),navigator.mediaDevices.getUserMedia({audio:this.constraints.audio}).then(e=>{t.addTrack(e.getAudioTracks()[0]),this._gotStream(t)})})}else if("chrome"===this.constraints.audio){let t={audio:!1,video:this.constraints.video};navigator.mediaDevices.getUserMedia(t).then(t=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{t.addTrack(e.getAudioTracks()[0]),this._gotStream(t)})})}else navigator.mediaDevices.getUserMedia(this.constraints).then(t=>{this._gotStream(t)}).catch(t=>{this.errorGettingStream(t)})},mountStreaming(){navigator.mediaDevices.getUserMedia(this.constraints).then(t=>(this._gotStream(t),navigator.mediaDevices.enumerateDevices())).then(this.gotDevices.bind(this))},mountToSetupAudioStreaming(){return navigator.mediaDevices.getUserMedia({audio:!0}).then(t=>{const e=t.getAudioTracks()[0];if("function"==typeof e.getSettings){const t=e.getSettings();t.deviceId&&(this.activeAudioDeviceId=t.deviceId)}return navigator.mediaDevices.enumerateDevices()}).catch(t=>{if("NotAllowedError"!==t.name)throw t;console.warn("Microphone permission not allowed")}).then(this.gotDevices.bind(this))},pauseRecording(){"recording"!=!this.recordingStatus&&(this._mediaRecorder.pause(),this.recordingStatus="paused",this.recording=!1,clearInterval(this._recordingTimer),this.durationMs+=Date.now()-this.recordingStartTimeMs)},async recordedBlob(){let t=new Blob(this.recordedChunks,{type:this.recordingOptions.mimeType});return this.recordingOptions.mimeType.startsWith("video/webm")&&(t=await n()(t,this.durationMs)),t},restartStreaming(){Object(s.a)("AV Recorder","Restarted"),this.stopStreaming(),this.startStreaming()},resumeRecording(){Object(s.a)("AV Recorder","Resumed"),this._mediaRecorder.resume(),this.recordingStatus="recording",this.recording=!0,this._recordingTimer=setInterval(()=>{this.secondsElapsed++},1e3),this.recordingStartTimeMs=Date.now()},discardRecording(){Object(s.a)("AV Recorder","Restarted"),this.secondsElapsed=0,this.recordedChunks=[],this._boundDataAvailableCallback&&this._mediaRecorder.removeEventListener("dataavailable",this._boundDataAvailableCallback),this.stopRecording(),this.durationMs=0},restartRecording(){this.discardRecording(),this.startRecording()},startRecording(){if(!this.hasReachedRecordingLimit&&"recording"!=this.recordingStatus){if("paused"==this.recordingStatus)return this.resumeRecording();"notstarted"==this.recordingStatus&&Object(s.a)("AV Recorder","Started"),this._mediaRecorder=new MediaRecorder(this._stream,this.recordingOptions),this._boundDataAvailableCallback||(this._boundDataAvailableCallback=this._gotRecordedData.bind(this)),this._mediaRecorder.addEventListener("dataavailable",this._boundDataAvailableCallback),this._mediaRecorder.start(),this.recording=!0,this.recordingStatus="recording",this._recordingTimer=setInterval(()=>{this.secondsElapsed++},1e3),this.recordingStartTimeMs=Date.now()}},startStreaming(){return navigator.mediaDevices.getUserMedia(this.constraints).then(this._gotStream.bind(this))},stopRecording(){this._mediaRecorder&&"stopped"!=this.recordingStatus&&"stopping"!=this.recordingStatus&&(this.recordingStatus="stopping",this.recording=!1,clearInterval(this._recordingTimer),0===this.durationMs&&(this.durationMs=Date.now()-this.recordingStartTimeMs),this.recordingStartTimeMs=null,this._mediaRecorder.stop())},stopStreaming(){this.streaming=!1,this._stream&&this._stream.getTracks().forEach(t=>t.stop())}}};e.a=c},390:function(t,e,i){},391:function(t,e,i){},436:function(t,e,i){"use strict";var s=i(87),a=i(442),r={components:{OzLoadingSpinner:s.a},mixins:[a.a],props:{title:String,download:{type:Boolean,default:!1}},computed:{finalTitle(){return this.title?this.title:this.__("Uploading %{filename}",{filename:this.filename||this.__("file")})}}},o=(i(788),i(5)),n=Object(o.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tv"},[t.error?[i("div",{staticClass:"tv-cell"},[i("p",{staticClass:"title-type"},[t._v(t._s(t.error))])]),t._v(" "),i("div",{staticClass:"tv-cell button-list"},[t.canRetryUpload?i("button",{staticClass:"text-button",on:{click:t.startUpload}},[t._v(t._s(t.__("Retry")))]):t._e(),t._v(" "),t.download?i("a",{staticClass:"text-button",attrs:{role:"button",href:t.fileUrl,download:""}},[t._v(t._s(t.__("Download")))]):t._e(),t._v(" "),i("button",{staticClass:"text-button",on:{click:t.cancelUpload}},[t._v(t._s(t.__("Cancel")))])])]:[i("div",{staticClass:"tv-cell"},[i("OzLoadingSpinner")],1),t._v(" "),i("div",{staticClass:"tv-cell"},[i("p",{staticClass:"title-type ellipsified-type"},[t._v(t._s(t.finalTitle))]),t._v(" "),i("p",{staticClass:"caption-type"},[t._v(t._s(t.__("Hang tight, we'll be done in a jiffy.")))])]),t._v(" "),i("div",{staticClass:"tv-cell"},[i("button",{staticClass:"text-button",on:{click:t.cancelUpload}},[t._v(t._s(t.__("Cancel")))])])]],2)}),[],!1,null,"7244b4be",null);e.a=n.exports},438:function(t,e,i){"use strict";var s=i(88),a={components:{ProcessedImage:i(282).a},props:{provider:{type:String,required:!0}},computed:{href(){return s.b[this.provider].href},src(){return s.b[this.provider].src},width(){return s.b[this.provider].width},height(){return s.b[this.provider].height}}},r=(i(804),i(5)),o=Object(r.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:this.href,target:"_blank"}},[e("processed-image",{staticClass:"attribution-image",attrs:{src:this.src,width:this.width,height:this.height,transforms:{width:this.width,height:this.height}}})],1)}),[],!1,null,"25f0b4e6",null);e.a=o.exports},477:function(t,e,i){"use strict";var s=i(321);i.n(s).a},479:function(t,e,i){},480:function(t,e,i){},481:function(t,e,i){},492:function(t,e,i){},493:function(t,e,i){},496:function(t,e,i){},497:function(t,e,i){},539:function(t,e,i){"use strict";var s=i(19),a=i(253);var r={props:["src","backgroundColor","alt","width","height","draggable"],data:()=>({success:!1,fail:!1}),computed:{actualSrc(){return this.success?this.src:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},loading(){return!this.success&&!this.fail},loadingStyle(){return{backgroundColor:this.backgroundColor,width:this.width+"px",height:this.height+"px"}}},watch:{src(){this.load()}},mounted(){this.load()},methods:{load(){this.success=!1,this.fail=!1;const t=new Image;t.onload=()=>{this.success=!0,this.$emit("load")},t.onerror=()=>{this.fail=!0,this.$emit("error")},t.src=this.src}}},o=(i(579),i(5)),n=Object(o.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this.loading?e("div",{staticClass:"attachment-image",style:this.loadingStyle}):e("img",{staticClass:"attachment-image",attrs:{src:this.actualSrc,alt:this.alt,width:this.width,height:this.height,draggable:this.draggable}})])}),[],!1,null,"d91e5e8e",null).exports,l=(i(75),i(64)),c=i(138),d={components:{BaseIcon:l.a},props:["actionable","title","currentUrl","isDownloadable","previewImageColor","previewImageAspectRatio","previewImageLuminance","embedHtml","embedMetaHeight"],data:()=>({}),computed:{downloadUrl(){return Object(c.d)(this.currentUrl)}},methods:{backToPreview(){this.$emit("back")},zoom(){this.$emit("zoom")}}},h=Object(o.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"beethoven-inline-embed",style:{"background-color":t.previewImageColor}},[i("div",{staticClass:"beethoven-inline-embed-container",style:{"background-color":t.previewImageColor},attrs:{"data-aspect-ratio":t.previewImageAspectRatio},domProps:{innerHTML:t._s(t.embedHtml)}}),t._v(" "),i("div",{staticClass:"beethoven-inline-embed-actions",style:{"background-color":t.previewImageColor,height:t.embedMetaHeight+"px"},attrs:{"data-luminance":t.previewImageLuminance}},[i("div",{staticClass:"button-list"},[i("button",{staticClass:"icon-button",attrs:{title:t.__("Back to preview")},on:{click:t.backToPreview}},[i("base-icon",{attrs:{name:"arrow_back"}})],1)]),t._v(" "),t.actionable?t._e():i("div",{staticClass:"button-list"},[i("button",{staticClass:"icon-button",attrs:{title:t.__("Zoom")},on:{click:t.zoom}},[i("base-icon",{attrs:{name:"zoom_in"}})],1),t._v(" "),t.isDownloadable?i("a",{staticClass:"icon-button",attrs:{target:"_blank",download:t.title,href:t.downloadUrl,draggable:"false",title:t.__("Download")}},[i("base-icon",{attrs:{name:"download"}})],1):t._e(),t._v(" "),i("a",{staticClass:"icon-button",attrs:{href:t.currentUrl,target:"_blank",draggable:"false",title:t.__("Open in new window")}},[i("base-icon",{attrs:{name:"open_in_new"}})],1)])])])}),[],!1,null,null,null).exports,u=i(87),p=i(39),v=i(66);function g(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function b(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?g(Object(i),!0).forEach((function(e){m(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const f=window.devicePixelRatio;var _={components:{SurfaceAttachmentPreviewImage:n,SurfaceAttachmentPreviewEmbed:h,OzLoadingSpinner:u.a},props:{url:String,width:Number,height:Number,actionable:{type:Boolean,default:!1},autocolor:{type:Boolean,default:!0},showProvider:{type:Boolean,default:!0}},data:()=>({currentUrl:null,showPreview:!0,showEmbed:!1,isLoaded:!1,isTiny:!1,isFallback:!1,link:null,previewImageSrc:null,previewImageWidth:null,previewImageHeight:null,previewImageColor:null,previewImageAspectRatio:null,previewImageLuminance:null,showMeta:null,title:null,description:null,providerName:null,contentCategory:null,contentSubcategory:null,extension:null,embedCode:null,embedHtml:null,isDownloadable:null,embedMetaHeight:null}),computed:b(b(b({},Object(s.e)(["isApp","isPhone","canPostMessage"])),Object(s.c)(["useArvo"])),{},{metaStyle(){return this.autocolor?{"background-color":this.previewImageColor}:{"background-color":"transparent"}}}),watch:{isLoaded(t){t&&this.$emit("loaded")}},mounted(){this.setState()},beforeUpdate(){this.setState()},methods:b(b({},Object(s.b)("nativeApp",["openLink"])),{},{unload(){this.currentUrl=null,this.isLoaded=!1},backToPreview(){this.showPreview=!0,this.showEmbed=!1,this.$emit("back-to-preview")},async setState(){if(this.currentUrl===this.url)return;if(this.currentUrl!==this.url&&this.backToPreview(),this.currentUrl=this.url,!this.url)return;const t={dpr:f,locale:p.a,width:this.width,height:this.height,useArvo:this.useArvo},e=await Object(a.a)(this.url,t);this.link=e,this.isLoaded=!0,this.isTiny=e.is_tiny,this.isFallback=e.is_fallback,this.previewImageSrc=e.image_url,this.previewImageWidth=e.image_width,this.previewImageHeight=e.image_height,this.previewImageColor=e.image_color,this.previewImageAspectRatio=e.image_aspect_ratio,this.previewImageLuminance=e.image_luminance,this.showMeta=e.show_meta,this.title=e.title,this.description=e.description,this.providerName=e.provider_name,this.contentCategory=e.content_category,this.contentSubcategory=e.content_subcategory,this.extension=e.extension,this.embedCode=e.embed_code,this.isDownloadable=e.is_downloadable&&this.isMobile,"file"===this.contentCategory?this.downloadFileName=this.title:this.downloadFileName=!1},play(){if(!this.actionable)return!1;if(this.playInApp(),Object(v.a)(this.$el).parents(".noclick,.is-dragging").length>0)return!1;if("video"===this.contentCategory||"audio"===this.contentCategory)return this.embedMetaHeight=Object(v.a)(this.$refs.previewMeta).height(),this.embedInline(),!1;if(this.isPhone){if("photo"===this.contentCategory)return this.zoom(),!1}else if(this.embedCode&&"padlet"!==this.contentSubcategory)return this.zoom(),!1;return!0},playInApp(){let t="external";"padlet"===this.contentSubcategory?t="padlet":"photo"===this.contentCategory||"file"===this.contentCategory?t="internal_mediaplayer":"page"!==this.contentCategory&&"document"!==this.contentCategory||(t="internal_webview"),this.openLink({contentCategory:this.contentCategory,contentSubcategory:this.contentSubcategory,url:this.url,linkType:t})},addQueryParams:(t,e)=>t.match(/\?/)?[t,e].join("&"):[t,e].join("?"),embedInline(){this.showPreview=!1,this.showEmbed=!0,this.embedHtml=this.embedCode;const t=Object(v.a)(this.embedCode);if(t.is("iframe")){t.attr({width:this.previewImageWidth,height:this.previewImageHeight}).css("background",this.previewImageColor);const e=t.attr("src");let i=this.addQueryParams(e,"autoplay=1");"youtube"===this.providerName.toLowerCase()&&(i=this.addQueryParams(i,"rel=0")),t.attr("src",i),this.embedHtml=t[0].outerHTML}this.$emit("play")},zoom(){},expandPost(){this.backToPreview()}})},w=(i(580),Object(o.a)(_,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"attachment-view"},[t.isLoaded&&t.showPreview?i("div",{key:"preview-image",staticClass:"attachment-preview",attrs:{href:t.currentUrl,target:"_blank",rel:"noopener nofollow"}},[i("surface-attachment-preview-image",{staticClass:"attachment-preview-image",attrs:{draggable:"false",alt:t.title,src:t.previewImageSrc,width:t.previewImageWidth,height:t.previewImageHeight,"background-color":t.previewImageColor}}),t._v(" "),t.showMeta?i("div",{staticClass:"attachment-preview-meta"},[i("div",{staticClass:"attachment-preview-title ellipsified-type",attrs:{title:t.title}},[t._v(t._s(t.title))]),t._v(" "),t.description?i("div",{staticClass:"attachment-preview-description ellipsified-type",attrs:{title:t.description}},[t._v("\n        "+t._s(t.description)+"\n      ")]):t._e(),t._v(" "),t.showProvider&&t.providerName?i("div",{staticClass:"attachment-preview-provider"},[i("div",{staticClass:"attachment-preview-provider-name ellipsified-type"},[t._v(t._s(t.providerName))])]):t._e()]):t._e()],1):t.showEmbed?i("surface-attachment-preview-embed",{attrs:{actionable:t.actionable,"current-url":t.currentUrl,"is-downloadable":t.isDownloadable,title:t.title,"preview-image-color":t.previewImageColor,"preview-image-aspect-ratio":t.previewImageAspectRatio,"preview-image-luminance":t.previewImageLuminance,"embed-html":t.embedHtml,"embed-meta-height":t.embedMetaHeight},on:{back:t.backToPreview,zoom:t.zoom}}):i("div",{key:"spinner",staticClass:"attachment-loading"},[i("OzLoadingSpinner")],1)],1)}),[],!1,null,"58d8aa06",null));e.a=w.exports},579:function(t,e,i){"use strict";var s=i(390);i.n(s).a},580:function(t,e,i){"use strict";var s=i(391);i.n(s).a},596:function(t,e,i){"use strict";var s=i(9),a=i(88),r=i(55),o=i(370),n=i(89),l=i(64),c=i(272),d=i(99),h={components:{BaseImage:c.a},props:{result:Object,width:Number,aspectRatio:Number},computed:{url(){if(this.result.thumbnail_width&&this.result.thumbnail_width>500){const t={width:this.width,crop:"thumb"};return this.aspectRatio&&(t.ar=this.aspectRatio),Object(d.processedUrl)(this.result.thumbnail_url,t)}return Object(d.proxiedUrl)(this.result.thumbnail_url)},height(){const t=this.aspectRatio?this.aspectRatio:this.result.thumbnail_width/this.result.thumbnail_height;return Math.floor(this.width/t)}}},u=i(5),p=Object(u.a)(h,(function(){var t=this.$createElement;return(this._self._c||t)("base-image",{attrs:{src:this.url,alt:this.result.title,height:this.height,width:this.width,loading:"lazy"}})}),[],!1,null,null,null).exports,v=i(438),g=i(87),b=i(75),m=i(26),f=i(4),_=i(129),w=i(336);const y={wallpaper:{allowedSources:["stock"],initialSearchMessage:Object(f.b)("Search wallpaper gallery.")},images:{allowedSources:["images"],initialSearchMessage:Object(f.b)("Search images.")},imagesAndGifs:{allowedSources:["images","gif"],initialSearchMessage:Object(f.b)("Search images and GIFs.")},all:{allowedSources:["images","videos","gif","audio","web"],initialSearchMessage:Object(f.b)("Search images, videos, GIFs, audio, websites, and more.")}};var C={components:{BaseIcon:l.a,BaseTextTabs:w.a,OzLoadingSpinner:g.a,WebBrowserThumbnail:p,WebBrowserAttribution:v.a},mixins:[_.a],props:{q:{type:String,default:""},preset:{type:String,default:"all",validator:t=>!!y[t]},xNewSurfaceShadows:{type:Boolean}},data:()=>({query:"",activeSearchFilter:n.a.getItem("activeContentSearchFilter")||"images",searchResults:[],nextSearchUrl:null,prevSearchUrl:null,searchProvider:null,isSearching:!1,error:!1,imageWidth:0,MAX_SEARCH_LENGTH:100}),computed:{allowedSources(){return y[this.preset].allowedSources},xTabs(){return this.allowedSources.length>1},tabsData:()=>[{text:Object(f.b)("Images"),key:"images"},{text:Object(f.b)("Videos"),key:"videos"},{text:Object(f.b)("Gifs"),key:"gif"},{text:Object(f.b)("Audio"),key:"audio"},{text:Object(f.b)("Web"),key:"web"}],status(){let t=null;if(this.isSearching)t="searching";else if(this.query)if(this.error)t="error";else{t=0===(this.searchResults.webpages||this.searchResults.images||this.searchResults.videos||this.searchResults.audio||[]).length?"noresults":"results"}else t="initial";return t},searchResultContentType(){let t=null;return t=this.searchResults.webpages?"webpages":this.searchResults.images?"images":this.searchResults.videos?"videos":this.searchResults.audio?"audio":"unknown",t},showAttribution(){return["giphy","spotify","tenor","unsplash","youtube"].includes(this.searchProvider)},initialSearchMessage(){return y[this.preset].initialSearchMessage}},watch:{preset:{handler(){this.allowedSources.includes(this.activeSearchFilter)||(n.a.setItem("activeContentSearchFilter",this.allowedSources[0]),this.activeSearchFilter=this.allowedSources[0])},immediate:!0},query(t){if(t)if(Object(r.e)(t))this.select(t);else{const e=Object(o.a)(t);e?this.select(e):this.search({query:t,filter:this.activeSearchFilter})}else this.searchResults=[]},activeSearchFilter(t){Object(b.a)("Web Browser","Changed Filter",t),n.a.setItem("activeContentSearchFilter",t),this.query&&(this.search({query:this.query,filter:t}),this.$refs.queryInput.focus())}},mounted(){Object(b.a)("Web Browser","Mounted",this.activeSearchFilter),this.$refs.queryInput.focus(),this.$refs.container.style.overflow="scroll",this.imageWidth=Math.floor(this.$refs.container.clientWidth/2-12),this.$refs.container.style.overflow="auto",!this.q||Object(r.e)(this.q)||Object(o.a)(this.q)||(this.query=this.q.substring(0,100),this.$nextTick(()=>{this.$refs.queryInput.select()}))},methods:{providerName:t=>t.provider_name?t.provider_name:Object(r.c)(t.url),audioDescription:t=>t.release_date?new Date(t.release_date).toLocaleDateString()+" \u2013 "+t.description:t.description,search(t){this.isSearching=!0,this.error=!1,Object(b.a)("Web Browser","Searched",t.query),t.query?Object(a.c)(t.query,t.filter).then(this.handleSearchResponse,this.handleErrorResponse):Object(a.d)(t.url).then(this.handleSearchResponse,this.handleErrorResponse)},handleSearchResponse(t){this.isSearching=!1,this.searchResults=t.data,t.links&&(this.prevSearchUrl=t.links.prev,this.nextSearchUrl=t.links.next),t.meta&&(this.searchProvider=t.meta.provider)},handleErrorResponse(t){Object(m.a)(t),this.isSearching=!1,this.error=!0},selectSearchType(t){this.activeSearchFilter=t},cancel(){this.close()},close(){this.$emit("close")},onSearch(){this.query=this.$refs.queryInput.value},select(t){this.$emit("select",t)},selectWithBeacon(t,e){e&&Object(s.fetchJson)(e,{cors:!0}),this.$emit("select",t)},searchNext(){this.search({url:this.nextSearchUrl})},searchPrev(){this.search({url:this.prevSearchUrl})}}},S=(i(805),Object(u.a)(C,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"web-browser side-panel side-panel-with-curtain",on:{click:function(e){return e.target!==e.currentTarget?null:t.close(e)}}},[i("div",{ref:"container",class:["panel-container","is-animated","slide-from-right",t.xNewSurfaceShadows?"shadow-elevation-3":"shadow-z3"]},[i("header",{staticClass:"panel-header panel-header-with-content"},[i("div",{staticClass:"panel-left-item"},[i("button",{staticClass:"text-button narrow-button",on:{click:t.close}},[t._v(t._s(t.__("Close")))])]),t._v(" "),i("div",{staticClass:"panel-title"},[t._v(t._s(t.__("Search")))]),t._v(" "),i("div",{staticClass:"panel-right-item"})]),t._v(" "),i("form",{class:["panel-header-content",{"panel-header-content-last":!t.xTabs}],on:{submit:function(e){return e.preventDefault(),t.onSearch(e)}}},[i("div",{staticClass:"web-browser-form-container"},[i("input",{ref:"queryInput",attrs:{type:"search",maxlength:t.MAX_SEARCH_LENGTH,autofocus:"",placeholder:t.__("Enter search term")},domProps:{value:t.query}}),t._v(" "),i("button",{staticClass:"icon-button",attrs:{type:"submit",title:t.__("Search")}},[i("base-icon",{attrs:{name:"arrow_forward"}})],1)])]),t._v(" "),t.xTabs?i("base-text-tabs",{staticClass:"web-browser-tabs panel-header-content-last",attrs:{tabs:t.tabsData,"active-key":t.activeSearchFilter,"click-handler":t.selectSearchType}}):t._e(),t._v(" "),"results"!=t.status?i("div",{staticClass:"web-browser-messages",attrs:{"data-status":t.status}},["initial"===t.status?i("div",{staticClass:"caption-type web-browser-padded-message"},[t._v("\n        "+t._s(t.initialSearchMessage)+"\n      ")]):"searching"==t.status?i("OzLoadingSpinner"):"noresults"==t.status?i("div",{staticClass:"caption-type web-browser-padded-message"},[i("p",[t._v(t._s(t.__("No results found for your search term.")))]),t._v(" "),i("p",[t._v(t._s(t.__("Hope you find what you are looking for!")))])]):"error"==t.status?i("div",{staticClass:"caption-type web-browser-padded-message"},[t._v("\n        "+t._s(t.__("Oops! Something went wrong. Please try again."))+"\n      ")]):t._e()],1):i("div",{staticClass:"web-browser-results",attrs:{"data-content-type":t.searchResultContentType}},[t.nextSearchUrl||t.prevSearchUrl?i("div",{staticClass:"web-browser-pagination-control web-browser-pagination-control-top"},[i("div",{staticClass:"web-browser-pagination-control-prev"},[t.prevSearchUrl?i("button",{staticClass:"caption-text-button narrow-button",on:{click:t.searchPrev}},[t._v("\n            "+t._s(t.__("Previous"))+"\n          ")]):t._e()]),t._v(" "),t.showAttribution?i("div",[i("web-browser-attribution",{attrs:{provider:t.searchProvider}})],1):t._e(),t._v(" "),i("div",{staticClass:"web-browser-pagination-control-next"},[t.nextSearchUrl?i("button",{staticClass:"caption-text-button narrow-button",on:{click:t.searchNext}},[t._v("\n            "+t._s(t.__("Next"))+"\n          ")]):t._e()])]):t._e(),t._v(" "),"webpages"==t.searchResultContentType?i("ul",{staticClass:"tv tv-list"},t._l(t.searchResults.webpages,(function(e){return i("li",{key:e.url,staticClass:"web-browser-webpage-result tv-cell tv-cell-actionable",on:{click:function(i){return t.select(e.url)}}},[i("h4",[t._v(t._s(e.title))]),t._v(" "),i("p",{staticClass:"small-type"},[t._v(t._s(e.description))]),t._v(" "),i("p",{staticClass:"small-caption-type ellipsified-type"},[t._v(t._s(e.url))])])})),0):"stock"===t.activeSearchFilter?i("ul",{staticClass:"tv tv-list"},t._l(t.searchResults.images,(function(e){return i("li",{key:e.url,staticClass:"web-browser-result",style:{width:t.imageWidth+"px"},on:{click:function(i){return t.selectWithBeacon(e.url,e.beacon_link)}}},[i("div",{staticClass:"web-browser-result-preview"},[i("web-browser-thumbnail",{attrs:{result:e,width:t.imageWidth,"aspect-ratio":1}})],1),t._v(" "),i("div",{staticClass:"web-browser-result-meta web-browser-result-meta-with-attribution"},[i("div",{staticClass:"web-browser-result-meta-text"},[i("div",{staticClass:"small-type"},[t._v(t._s(e.title))])]),t._v(" "),i("a",{staticClass:"caption-type",attrs:{href:e.attribution_link,target:"blank"},on:{click:function(t){t.stopPropagation()}}},[i("base-icon",{attrs:{name:"link",size:"small"}})],1)])])})),0):"images"==t.searchResultContentType?i("ul",{staticClass:"tv tv-list"},t._l(t.searchResults.images,(function(e){return i("li",{key:e.url,staticClass:"web-browser-result",style:{width:t.imageWidth+"px"},on:{click:function(i){return t.selectWithBeacon(e.url,e.beacon_link)}}},[i("div",{staticClass:"web-browser-result-preview"},[i("web-browser-thumbnail",{attrs:{result:e,width:t.imageWidth}})],1),t._v(" "),e.attribution_link?i("div",{staticClass:"web-browser-result-meta web-browser-result-meta-with-attribution"},[i("div",{staticClass:"web-browser-result-meta-text"},[i("div",{staticClass:"small-type ellipsified-type",attrs:{title:e.title}},[t._v(t._s(e.title))]),t._v(" "),i("div",{staticClass:"small-caption-type ellipsified-type"},[t._v(t._s(t.providerName(e)))]),t._v(" "),i("div",{staticClass:"small-type muted-type ellipsified-type"},[t._v(t._s(e.width)+"x"+t._s(e.height))])]),t._v(" "),i("a",{staticClass:"caption-type",attrs:{href:e.attribution_link,target:"blank"},on:{click:function(t){t.stopPropagation()}}},[i("base-icon",{attrs:{name:"link",size:"small"}})],1)]):i("div",{staticClass:"web-browser-result-meta"},["images"==t.activeSearchFilter?i("div",{staticClass:"small-type"},[t._v(t._s(e.width)+"x"+t._s(e.height))]):t._e(),t._v(" "),i("div",{staticClass:"small-caption-type ellipsified-type"},[t._v(t._s(t.providerName(e)))])])])})),0):"audio"==t.searchResultContentType?i("ul",{staticClass:"tv tv-list"},t._l(t.searchResults.audio,(function(e){return i("li",{key:e.url,staticClass:"web-browser-result",style:{width:t.imageWidth+"px"},on:{click:function(i){return t.select(e.url)}}},[i("div",{staticClass:"web-browser-result-preview"},[i("web-browser-thumbnail",{attrs:{result:e,width:t.imageWidth,"aspect-ratio":1}}),t._v(" "),e.duration?i("div",{staticClass:"web-browser-result-duration"},[t._v(t._s(e.duration))]):t._e()],1),t._v(" "),i("div",{staticClass:"web-browser-result-meta"},[i("div",{staticClass:"small-type"},[t._v(t._s(e.title))]),t._v(" "),i("div",{staticClass:"small-caption-type ellipsified-type",attrs:{title:t.audioDescription(e)}},[t._v("\n              "+t._s(t.audioDescription(e))+"\n            ")])])])})),0):"videos"==t.searchResultContentType?i("ul",{staticClass:"tv tv-list"},t._l(t.searchResults.videos,(function(e){return i("li",{key:e.url,staticClass:"web-browser-result",style:{width:t.imageWidth+"px"},on:{click:function(i){return t.select(e.url)}}},[i("div",{staticClass:"web-browser-result-preview"},[i("web-browser-thumbnail",{attrs:{result:e,width:t.imageWidth}}),t._v(" "),e.duration?i("div",{staticClass:"web-browser-result-duration"},[t._v(t._s(e.duration))]):t._e()],1),t._v(" "),i("div",{staticClass:"web-browser-result-meta"},[i("div",{staticClass:"small-type"},[t._v(t._s(e.title))]),t._v(" "),i("div",{staticClass:"small-caption-type ellipsified-type"},[t._v(t._s(t.providerName(e)))])])])})),0):t._e(),t._v(" "),t.nextSearchUrl||t.prevSearchUrl?i("div",{staticClass:"web-browser-pagination-control"},[i("div",{staticClass:"web-browser-pagination-control-prev"},[t.prevSearchUrl?i("button",{staticClass:"caption-text-button narrow-button",on:{click:t.searchPrev}},[t._v("\n            "+t._s(t.__("Previous"))+"\n          ")]):t._e()]),t._v(" "),t.showAttribution?i("div",[i("web-browser-attribution",{attrs:{provider:t.searchProvider}})],1):t._e(),t._v(" "),i("div",{staticClass:"web-browser-pagination-control-next"},[t.nextSearchUrl?i("button",{staticClass:"caption-text-button narrow-button",on:{click:t.searchNext}},[t._v("\n            "+t._s(t.__("Next"))+"\n          ")]):t._e()])]):t.showAttribution?i("div",{staticClass:"web-browser-attribution-control"},[i("web-browser-attribution",{attrs:{provider:t.searchProvider}})],1):t._e()])],1)])}),[],!1,null,"1a4bdbc7",null));e.a=S.exports},597:function(t,e,i){"use strict";var s=i(319),a=i(371),r=i(129),o=i(64),n=i(87),l=i(611);const c=new Audio(i.n(l).a);i(89);var d=i(75),h={components:{BaseIcon:o.a,OzLoadingSpinner:n.a},mixins:[s.a,a.a,r.a],data:()=>({canvasWidth:640,canvasHeight:360,filter:"normal",filtersEnabled:!1,hiddenCanvasWidth:640,hiddenCanvasHeight:360,captured:!1,secondsToCapture:0,title:""}),computed:{constraints(){return{video:{deviceId:this.activeVideoDeviceId?{exact:this.activeVideoDeviceId}:void 0,width:3840,height:2160}}}},mounted(){this.mountStreaming()},beforeDestroy(){this.stopStreaming()},methods:{applyFilter(t){this.filter=t.target.value,this.draw(!1),Object(d.a)("Photo Booth","Applied Filter",this.filter)},cancel(){this.captured?confirm(this.__("You have not saved your photo. Are you sure you want to close photo booth?"))&&this.close():this.close()},close(){this.$emit("close")},captureInThree(){this.secondsToCapture=3,setTimeout(()=>{this.secondsToCapture=2},1e3),setTimeout(()=>{this.secondsToCapture=1},2e3),setTimeout(()=>{this.secondsToCapture=0,this.capture()},3e3)},capture(){Object(d.a)("Photo Booth","Captured"),this.playSound(),this.captured=!0,this.draw(!0),this.$nextTick(()=>{this.$refs.captionInput.focus()})},draw(t=!0){const e=this.$refs.canvas,i=this.$refs.player,s=e.getContext("2d"),a=this.$refs.hiddenCanvas,r=a.getContext("2d");s.filter&&(this.filtersEnabled=!0,"normal"===this.filter?(s.filter="none",r.filter="none"):"sepia"===this.filter?(s.filter="sepia(100%)",r.filter="sepia(100%)"):"grayscale"===this.filter&&(s.filter="grayscale(100%)",r.filter="grayscale(100%)")),t?(s.drawImage(i,0,0,e.width,e.height),r.drawImage(i,0,0,a.width,a.height)):s.drawImage(a,0,0,e.width,e.height)},gotStream(t){const e=t.getVideoTracks()[0];if("function"===typeof e.getSettings){const t=e.getSettings();t.height&&(this.hiddenCanvasHeight=t.height),t.width&&(this.hiddenCanvasWidth=t.width),t.aspectRatio&&(this.canvasHeight=Math.floor(this.canvasWidth/t.aspectRatio))}this.$refs.player.srcObject=t},playSound(){c.play()},redo(){Object(d.a)("Photo Booth","Redo"),this.captured=!1},save(){Object(d.a)("Photo Booth","Saved");const t=this.$refs.hiddenCanvas,e=this.$refs.captionInput.value;if("normal"!==this.filter){t.getContext("2d").drawImage(t,0,0,t.width,t.height)}if(this.handleCaption(e),t.msToBlob){const e=t.msToBlob("image/jpeg");e.name="drawing.png",this.handleFile(e)}else t.toBlob(t=>{const e=(this.title||"photo")+".jpeg";t.name=e,this.handleFile(t)},"image/jpeg")}}},u=(i(791),i(5)),p=Object(u.a)(h,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"photo-booth modal panel panel-top",on:{click:function(e){return e.target!==e.currentTarget?null:t.cancel(e)}}},[i("div",{staticClass:"panel-container is-animated slide-from-top"},[t.uploading?i("div",[i("header",{staticClass:"panel-header"}),t._v(" "),i("div",{staticClass:"panel-body",style:{height:t.canvasHeight+"px"}},[i("div",{staticClass:"panel-interstitial"},[i("interstitial-uploader",{attrs:{file:t.file,download:!0,title:t.__("Saving photo")},on:{done:t.onUploadDone,cancel:t.onUploadCancel}})],1)]),t._v(" "),i("footer",{staticClass:"panel-footer"})]):i("div",[i("header",{staticClass:"panel-header"},[i("div",{staticClass:"panel-left-item"},[i("button",{staticClass:"text-button narrow-button",on:{click:t.cancel}},[t._v(t._s(t.__("Close")))])]),t._v(" "),i("div",{staticClass:"panel-title"},[t._v(t._s(t.__("Photo booth")))]),t._v(" "),i("div",{staticClass:"panel-right-item"},[t.captured?i("button",{staticClass:"flat-button narrow-button",on:{click:t.save}},[t._v(t._s(t.__("Save")))]):t._e()])]),t._v(" "),i("div",{staticClass:"panel-body",style:{height:t.canvasHeight+"px"}},[t.streaming?t._e():i("div",{staticClass:"panel-interstitial"},[i("div",{staticClass:"tv"},[i("div",{staticClass:"tv-cell"},[i("OzLoadingSpinner")],1),t._v(" "),i("div",{staticClass:"tv-cell"},[i("p",[t._v(t._s(t.__("Starting camera ...")))]),t._v(" "),i("p",{staticClass:"caption-type"},[t._v("\n                "+t._s(t.__("Please make sure you have given us permission to use your camera."))+"\n              ")])])])]),t._v(" "),i("video",{ref:"player",class:{"out-of-bounds":t.captured||!t.streaming},attrs:{width:t.canvasWidth,height:t.canvasHeight,autoplay:""}}),t._v(" "),i("canvas",{ref:"canvas",class:{"out-of-bounds":!t.captured},attrs:{width:t.canvasWidth,height:t.canvasHeight}}),t._v(" "),i("canvas",{ref:"hiddenCanvas",class:{"out-of-bounds":!0},attrs:{width:t.hiddenCanvasWidth,height:t.hiddenCanvasHeight}})]),t._v(" "),i("footer",{staticClass:"panel-footer"},[i("button",{directives:[{name:"show",rawName:"v-show",value:t.streaming&&!t.captured&&0===t.secondsToCapture,expression:"streaming && !captured && secondsToCapture === 0"}],staticClass:"floating-action-button shadow-z2 hover-hover:hover:shadow-z3",attrs:{title:t.__("Capture")},on:{click:t.captureInThree}},[i("base-icon",{attrs:{name:"camera"}})],1),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:t.captured,expression:"captured"}],staticClass:"floating-action-button photo-booth-redo",attrs:{title:t.__("Redo")},on:{click:t.redo}},[i("base-icon",{attrs:{name:"refresh"}})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.secondsToCapture>0,expression:"secondsToCapture > 0"}],staticClass:"photo-booth-countdown notice-scheme"},[i("div",{staticClass:"is-animated scale-up"},[t._v(t._s(t.secondsToCapture))])]),t._v(" "),!t.captured&&t.videoDevices.length>1?i("div",{staticClass:"photo-booth-video-chooser"},[i("div",{staticClass:"select-box"},[i("select",{on:{change:t.chooseVideoDevice}},t._l(t.videoDevices,(function(e){return i("option",{key:e.id,domProps:{selected:e.id==t.activeVideoDeviceId,value:e.id}},[t._v("\n                "+t._s(e.label)+"\n              ")])})),0)])]):t._e(),t._v(" "),t.captured?i("div",{staticClass:"photo-booth-caption-form"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],ref:"captionInput",attrs:{type:"text",autofocus:"",placeholder:t.__("Enter a caption (optional)")},domProps:{value:t.title},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(e)},input:function(e){e.target.composing||(t.title=e.target.value)}}})]):t._e(),t._v(" "),t.captured&&t.filtersEnabled?i("div",{staticClass:"photo-booth-filter-form"},[i("div",{staticClass:"radio-button"},[i("label",[i("input",{attrs:{type:"radio",value:"normal"},domProps:{checked:"normal"==t.filter},on:{change:t.applyFilter}}),i("span",[t._v("\n                "+t._s(t.__("Normal"))+"\n              ")])]),t._v(" "),i("label",[i("input",{attrs:{type:"radio",value:"grayscale"},domProps:{checked:"grayscale"==t.filter},on:{change:t.applyFilter}}),i("span",[t._v("\n                "+t._s(t.__("Grayscale"))+"\n              ")])]),t._v(" "),i("label",[i("input",{attrs:{type:"radio",value:"sepia"},domProps:{checked:"sepia"==t.filter},on:{change:t.applyFilter}}),i("span",[t._v("\n                "+t._s(t.__("Sepia"))+"\n              ")])])])]):t._e()])])])])}),[],!1,null,"b7908018",null);e.a=p.exports},598:function(t,e,i){"use strict";var s=i(319),a=i(129),r=i(539),o=i(608),n=i.n(o),l=i(9),c=i(75),d={components:{AttachmentPreview:r.a},mixins:[s.a,a.a],props:{cabinet:{type:Boolean,default:!0},maxFileSize:{type:Number},xNewSurfaceShadows:{type:Boolean}},data:()=>({imageSrc:n.a,dragging:!1,fileWidth:175,lazyLoadingThreshold:20,existingFilesSubset:[],existingFiles:[]}),mounted(){this.cabinet&&(this.$refs.container.style.overflow="scroll",this.fileWidth=Math.floor(this.$refs.container.clientWidth/2-12),this.$refs.container.style.overflow="auto",Object(l.fetchJson)("/api/attachments?filter=files").then(t=>{this._intersectionObserver.observe(this.$refs.io),this.existingFiles=t,this.existingFilesSubset=this.existingFiles.slice(0,this.lazyLoadingThreshold)}),this._intersectionObserver=new IntersectionObserver(this.onIntersection.bind(this)))},beforeDestroy(){this._intersectionObserver.disconnect()},methods:{close(){this.$emit("close")},cancel(){this.uploading?window.confirm(this.__("You are in the middle of an upload. Are you sure you want to close the file browser?"))&&this.close():this.close()},onDragLeave(){this.dragging=!1},onDragOver(){this.uploading||(this.dragging=!0)},onDrop(t){if(!this.uploading&&(this.dragging=!1,t.dataTransfer)){Object(c.a)("File Browser","Dragged File");const e=t.dataTransfer.files;e&&e.length>0&&this.handleFile(e[0])}},onIntersection(t){if(t[0].intersectionRatio>0&&this.existingFiles.length>this.existingFilesSubset.length){const t=this.existingFilesSubset.length+this.lazyLoadingThreshold;this.existingFilesSubset=this.existingFiles.slice(0,t)}},onUploadCancel(){this.uploading=!1},onUploadReject(t,e){this.$emit("reject",t,e)},selectFileFromCabinet(t){Object(c.a)("File Browser","Selected Existing"),this.$emit("select",t.currentTarget.href)},startUpload(t){Object(c.a)("File Browser","Picked File");const e=t.target.files[0];this.handleFile(e)}}},h=(i(789),i(5)),u=Object(h.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"file-browser panel side-panel side-panel-with-curtain",attrs:{"data-dragging":t.dragging},on:{click:function(e){return e.target!==e.currentTarget?null:t.cancel(e)}}},[i("div",{ref:"container",class:["panel-container","is-animated","slide-from-right",t.xNewSurfaceShadows?"shadow-elevation-3":"shadow-z3"],on:{dragover:function(e){return e.preventDefault(),t.onDragOver(e)},dragleave:function(e){return e.preventDefault(),t.onDragLeave(e)},drop:function(e){return e.preventDefault(),t.onDrop(e)}}},[t.uploading?i("div",{staticClass:"panel-body file-browser-uploading-body"},[t.uploading?i("interstitial-uploader",{staticClass:"panel-interstitial",attrs:{file:t.file,"max-file-size":t.maxFileSize},on:{done:t.onUploadDone,reject:t.onUploadReject,cancel:t.onUploadCancel}}):t._e()],1):t.dragging?i("div",{staticClass:"panel-body panel-interstitial file-browser-drop-message"},[i("div",{staticClass:"tv-cell"},[i("img",{attrs:{src:t.imageSrc,width:"218",height:"130"}})]),t._v(" "),i("div",{staticClass:"tv-cell strong-type"},[t._v(t._s(t.__("Drop file here to upload.")))])]):[i("header",{staticClass:"panel-header"},[i("div",{staticClass:"panel-left-item"},[i("button",{staticClass:"text-button narrow-button",on:{click:t.cancel}},[t._v(t._s(t.__("Close")))])]),t._v(" "),i("div",{staticClass:"panel-title"},[t._v(t._s(t.__("Files")))]),t._v(" "),i("div",{staticClass:"panel-right-item"})]),t._v(" "),i("div",{staticClass:"panel-body file-browser-input-body"},[i("label",{staticClass:"tv file-browser-drag-message",attrs:{for:"input"+t._uid}},[i("div",{staticClass:"tv-cell"},[i("p",[i("strong",[t._v(t._s(t.__("Pick a file from your computer by dragging it here or by clicking the button below.")))])]),t._v(" "),i("p",{staticClass:"caption-type small-type"},[t._v("\n              "+t._s(t.__("We support all kinds of files \u2013 images, videos, docs, spreadsheets, presentations, pdfs, songs, and more."))+"\n            ")])]),t._v(" "),i("div",{staticClass:"tv-cell"},[i("div",{staticClass:"raised-button"},[t._v(t._s(t.__("Pick file")))])])]),t._v(" "),i("input",{attrs:{id:"input"+t._uid,type:"file"},on:{change:t.startUpload}}),t._v(" "),t.cabinet&&t.existingFiles.length>0?i("div",{staticClass:"file-browser-cabinet"},[i("div",{staticClass:"caption-type tv-cell file-browser-cabinet-title"},[t._v("\n            "+t._s(t.__("Or, select a file from your padlet drive"))+"\n          ")]),t._v(" "),t._l(t.existingFilesSubset,(function(e){return i("a",{key:e,staticClass:"file-browser-file",style:{width:t.fileWidth+"px"},attrs:{href:e},on:{click:function(e){return e.preventDefault(),t.selectFileFromCabinet(e)}}},[i("attachment-preview",{staticClass:"file-browser-attachment",attrs:{url:e,actionable:!1,"show-provider":!1,width:t.fileWidth}})],1)}))],2):t._e(),t._v(" "),i("div",{ref:"io",staticClass:"file-browser-observer"})])]],2)])}),[],!1,null,"2278a656",null);e.a=u.exports},599:function(t,e,i){"use strict";var s=i(64),a=i(319),r=i(129),o=i(4),n=i(75),l=i(89),c=i(26);function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],s=!0,a=!1,r=void 0;try{for(var o,n=t[Symbol.iterator]();!(s=(o=n.next()).done)&&(i.push(o.value),!e||i.length!==e);s=!0);}catch(l){a=!0,r=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return i}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return h(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}const u=!!window.PointerEvent;var p={components:{BaseIcon:s.a},mixins:[a.a,r.a],data:()=>({activeStrokes:[],availableColors:{black:["black",Object(o.b)("Black")],white:["white",Object(o.b)("White")],red:["#FA3142",Object(o.b)("Red")],blue:["#157FFB",Object(o.b)("Blue")],yellow:["#FDD230",Object(o.b)("Yellow")],green:["#51D727",Object(o.b)("Green")],pink:["#F17CFC",Object(o.b)("Pink")],purple:["#835FF4",Object(o.b)("Purple")],cyan:["#72E1FD",Object(o.b)("Cyan")],orange:["#FF9800",Object(o.b)("Orange")],brown:["#985213",Object(o.b)("Brown")]},backgroundColor:l.a.getItem("canvasBackgroundColor")||"white",brush:"pen",canvasWidth:null,canvasHeight:null,colorName:"black",colors:[],lineWidths:[],paint:!1,redoColors:[],redoLineWidths:[],redoStrokeSets:[],saveButton:!0,scaledCanvasWidth:null,scaledCanvasHeight:null,strokeSets:[],eventHistory:[]}),computed:{backgroundSelectorStyle(){return this.canvasWidth>320?"radio":"select"},brushColorName(){return"pen"===this.brush?this.colorName:this.backgroundColor},brushSize(){return"eraser"===this.brush?21:3},canvasStyle(){let t="crosshair";return"eraser"===this.brush&&(t="grabbing"),{width:this.canvasWidth+"px",height:this.canvasHeight+"px",cursor:t}},canUndo(){return this.strokeSets.length>0},canRedo(){return this.redoStrokeSets.length>0},colorHex(){return this.availableColors[this.colorName][0]},hasDrawn(){return this.strokeSets.length>0||this.redoStrokeSets.length>0}},mounted(){Object(n.a)("Drawing Canvas","Mounted",this.backgroundColor);const t=this.$refs.canvas,e=window.devicePixelRatio;this.canvasWidth=t.clientWidth,this.canvasHeight=t.clientHeight,this.scaledCanvasWidth=Math.floor(this.canvasWidth*e),this.scaledCanvasHeight=Math.floor(this.canvasHeight*e),"black"===this.backgroundColor&&(this.colorName="white"),this.$nextTick(()=>{const i=t.getContext("2d");i.scale(e,e),i.fillStyle=this.backgroundColor,i.fillRect(0,0,t.width,t.height)})},methods:{addPixels(t){this.redoStrokeSets=[],this.redoLineWidths=[],this.redoColors=[];const e=this.strokeSets[this.strokeSets.length-1];e||Object(c.c)("Stroke Set Issue With Drawing",{context:{strokeSetLength:this.strokeSets.length,activeStrokeLength:this.activeStrokes.length,eventHistory:this.eventHistory}});const i=this.$refs.canvas.getBoundingClientRect();for(const s of t){const t=s.pointerId?s.pointerId:s.identifier,a=t?e.find(e=>e.id===t):e[0],r=s.pageX-i.left,o=s.pageY-i.top;a.pixels.push([r,o])}this.redraw()},addStrokesToCurrentSet(t){const e=this.strokeSets[this.strokeSets.length-1];this.strokeSets[this.strokeSets.length-1]=e.concat(t.map(t=>this.newStroke(t)))},cancel(){this.hasDrawn?confirm(Object(o.b)("You have not saved your drawing. Are you sure you want to close the canvas?"))&&this.close():this.close()},changeBackgroundColor(t){const e=t.currentTarget.value,i=this.backgroundColor;this.backgroundColor=e,l.a.setItem("canvasBackgroundColor",e),this.colorName===e&&(this.colorName=i),this.colors=this.colors.map(t=>t===e?i:t===i?e:t),this.$nextTick(()=>{this.redraw()}),Object(n.a)("Drawing Canvas","Changed Bg",e)},close(){this.$emit("close")},exportCoordinates(){let t=Math.min.apply(null,this.pixelsX),e=Math.max.apply(null,this.pixelsX),i=Math.min.apply(null,this.pixelsY),s=Math.max.apply(null,this.pixelsY);const a=this.$refs.canvas.width,r=this.$refs.canvas.height;return t=Math.max(t-16,0),e=Math.min(e+16,a),i=Math.max(i-16,0),s=Math.min(s+16,r),{x:t,y:i,width:e-t,height:s-i}},hideSaveButton(){this.saveButton=!1},newStroke:t=>({id:t,pixels:[]}),onMouseDown(t){u||(this.startNewStrokeSet(),this.addStrokesToCurrentSet(["id"]),this.paint=!0,this.addPixels([t]))},onMouseMove(t){u||this.paint&&this.addPixels([t])},onMouseUp(){u||(this.paint=!1)},onPointerDown(t){this.eventHistory.push("pointerdown"),0===this.activeStrokes.length&&this.startNewStrokeSet(),this.paint=!0,this.addStrokesToCurrentSet([t.pointerId]),this.activeStrokes.push(t.pointerId),this.addPixels([t])},onPointerMove(t){this.eventHistory.push("pointermove"),this.paint&&this.addPixels([t])},onPointerUp(t){this.eventHistory.push("pointerup");const e=t.pointerId;this.activeStrokes=this.activeStrokes.filter(t=>t!==e),0===this.activeStrokes.length&&(this.paint=!1)},onTouchEnd(t){if(u)return;const e=Array.from(t.changedTouches).map(t=>t.identifier);this.activeStrokes=this.activeStrokes.filter(t=>!e.includes(t)),0===this.activeStrokes.length&&(this.paint=!1)},onTouchMove(t){if(!u&&this.paint){const e=Array.from(t.touches);this.addPixels(e)}},onTouchStart(t){if(u)return;this.paint=!0;const e=Array.from(t.touches),i=e.map(t=>t.identifier);0===this.activeStrokes.length&&this.startNewStrokeSet();const s=i.filter(t=>!this.activeStrokes.includes(t));this.addStrokesToCurrentSet(s),this.activeStrokes=i,this.addPixels(e)},onMouseOut(){this.onMouseUp()},onPointerOut(t){this.onPointerUp(t)},pickBrush(t){this.brush=t},pickColor(t){this.colorName=t},redo(){this.strokeSets.push(this.redoStrokeSets.shift()),this.lineWidths.push(this.redoLineWidths.shift()),this.colors.push(this.redoColors.shift()),this.redraw()},redraw(){const t=this.strokeSets.length,e=this.$refs.canvas,i=e.getContext("2d");i.fillStyle=this.backgroundColor,i.fillRect(0,0,e.width,e.height),i.lineJoin="round",i.lineCap="round";for(let s=0;s<t;s++){const t=this.strokeSets[s];for(const e of t){const t=e.pixels,a=t.length;if(i.beginPath(),0===a);else if(1===a){const e=d(t[0],2),s=e[0],a=e[1];i.moveTo(s-1,a-1),i.lineTo(s,a)}else if(2===a){const e=d(t[0],2),s=e[0],a=e[1],r=d(t[1],2),o=r[0],n=r[1];i.quadraticCurveTo(s,a,o,n)}else{const e=d(t[0],2),s=e[0],r=e[1];i.moveTo(s,r);for(let p=1;p<=a-3;p++){const e=d(t[p],2),s=e[0],a=e[1],r=d(t[p+1],2),o=(s+r[0])/2,n=(a+r[1])/2;i.quadraticCurveTo(s,a,o,n)}const o=d(t[a-2],2),n=o[0],l=o[1],c=d(t[a-1],2),h=c[0],u=c[1];i.quadraticCurveTo(n,l,h,u)}i.strokeStyle=this.availableColors[this.colors[s]][0],i.lineWidth=this.lineWidths[s],i.stroke()}}},save(){const t=this.$refs.canvas;if(t.msToBlob){const e=t.msToBlob("image/png");e.name="drawing.png",this.handleFile(e)}else t.toBlob(t=>{t.name="drawing.png",this.handleFile(t)},"image/png")},showSaveButton(){this.saveButton=!0},startNewStrokeSet(){this.strokeSets.push([]),this.colors.push(this.brushColorName),this.lineWidths.push(this.brushSize)},undo(){this.redoStrokeSets.unshift(this.strokeSets.pop()),this.redoLineWidths.unshift(this.lineWidths.pop()),this.redoColors.unshift(this.colors.pop()),this.redraw()}}},v=(i(808),i(5)),g=Object(v.a)(p,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"drawing-canvas modal panel",on:{click:function(e){return e.target!==e.currentTarget?null:t.cancel(e)}}},[i("div",{staticClass:"panel-container is-animated scale-up",attrs:{"data-theme":t.backgroundColor}},[t.uploading?i("div",[i("header",{staticClass:"panel-header"}),t._v(" "),i("div",{staticClass:"panel-body"},[i("div",{staticClass:"panel-interstitial"},[i("interstitial-uploader",{attrs:{file:t.file,download:!0,title:"Saving drawing"},on:{done:t.onUploadDone,cancel:t.onUploadCancel}})],1)]),t._v(" "),i("footer",{staticClass:"panel-footer"})]):[i("header",{staticClass:"panel-header"},[i("div",{staticClass:"panel-left-item"},[i("button",{staticClass:"text-button narrow-button",on:{click:t.cancel}},[t._v(t._s(t.__("Close")))])]),t._v(" "),i("div",{staticClass:"drawing-canvas-undo"},[i("button",{staticClass:"icon-button",attrs:{disabled:!t.canUndo,title:t.__("Undo")},on:{click:t.undo}},[i("base-icon",{attrs:{name:"undo"}})],1),t._v(" "),i("button",{staticClass:"icon-button",attrs:{disabled:!t.canRedo,title:t.__("Redo")},on:{click:t.redo}},[i("base-icon",{attrs:{name:"redo"}})],1)]),t._v(" "),i("div",["radio"===t.backgroundSelectorStyle?i("div",{staticClass:"radio-button"},[i("label",[i("input",{attrs:{type:"radio",value:"white"},domProps:{checked:"white"==t.backgroundColor},on:{change:t.changeBackgroundColor}}),i("span",[t._v(t._s(t.__("White")))])]),t._v(" "),i("label",[i("input",{attrs:{type:"radio",value:"black"},domProps:{checked:"black"==t.backgroundColor},on:{change:t.changeBackgroundColor}}),i("span",[t._v(t._s(t.__("Black")))])])]):i("div",{staticClass:"select-box"},[i("select",{on:{change:t.changeBackgroundColor,focus:t.hideSaveButton,blur:t.showSaveButton}},[i("option",{attrs:{value:"white"}},[t._v(t._s(t.__("White")))]),t._v(" "),i("option",{attrs:{value:"black"}},[t._v(t._s(t.__("Black")))])])])]),t._v(" "),i("div",{staticClass:"panel-right-item"},[i("button",{directives:[{name:"show",rawName:"v-show",value:t.saveButton,expression:"saveButton"}],staticClass:"flat-button narrow-button",on:{click:t.save}},[t._v(t._s(t.__("Save")))])])]),t._v(" "),i("div",{staticClass:"panel-body"},[i("canvas",{ref:"canvas",style:t.canvasStyle,attrs:{width:t.scaledCanvasWidth,height:t.scaledCanvasHeight},on:{pointerdown:t.onPointerDown,mousedown:t.onMouseDown,touchstart:function(e){return e.preventDefault(),t.onTouchStart(e)},pointerup:t.onPointerUp,mouseup:t.onMouseUp,touchend:function(e){return e.preventDefault(),t.onTouchEnd(e)},pointermove:t.onPointerMove,mousemove:t.onMouseMove,touchmove:function(e){return e.preventDefault(),t.onTouchMove(e)},mouseout:t.onMouseOut,pointerout:t.onPointerOut}})]),t._v(" "),i("footer",{staticClass:"panel-footer"},[i("div",{staticClass:"color-picker"},t._l(t.availableColors,(function(e,s){return s!=t.backgroundColor?i("button",{key:s,class:{active:t.colorName==s},on:{click:function(e){return t.pickColor(s)}}},[i("div",{style:{background:e[0]}})]):t._e()})),0),t._v(" "),i("div",{staticClass:"brush-picker"},[i("button",{class:{"icon-button":!0},style:{color:"pen"==t.brush?t.colorHex:null},attrs:{title:t.__("Pen")},on:{click:function(e){return t.pickBrush("pen")}}},[i("base-icon",{attrs:{name:"edit"}})],1),t._v(" "),i("button",{class:{"icon-button":!0,active:"eraser"==t.brush},attrs:{title:t.__("Eraser")},on:{click:function(e){return t.pickBrush("eraser")}}},[i("base-icon",{attrs:{name:"eraser"}})],1)])])]],2)])}),[],!1,null,"364f4556",null);e.a=g.exports},600:function(t,e,i){"use strict";var s=i(55),a=i(370),r=i(4),o={mixins:[i(129).a],data:()=>({url:"",inputPlaceholder:Object(r.b)("E.g. %{example}",{example:"https://drive.google.com/mydocument"})}),computed:{validUrl(){if(Object(s.e)(this.url))return this.url;if(Object(s.e)("http://"+this.url))return"http://"+this.url;const t=Object(a.a)(this.url);return t||null}},mounted(){this.$refs.input.focus()},methods:{cancel(){this.$emit("close")},save(){this.validUrl&&this.$emit("select",this.validUrl)}}},n=(i(809),i(5)),l=Object(n.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal is-wide",on:{click:function(e){return e.target!==e.currentTarget?null:t.cancel(e)}}},[i("div",{staticClass:"modal-container is-animated scale-up"},[i("header",{staticClass:"modal-header"},[t._v(t._s(t.__("Enter URL")))]),t._v(" "),i("div",{staticClass:"modal-body"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],ref:"input",class:{invalid:t.url&&!t.validUrl},attrs:{type:"url",placeholder:t.inputPlaceholder,autofocus:"",novalidate:""},domProps:{value:t.url},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(e)},input:function(e){e.target.composing||(t.url=e.target.value)}}}),t._v(" "),i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.url,expression:"!url"}],staticClass:"small-type muted-type"},[t._v("\n          "+t._s(t.__("We support all kinds of URLs \u2014 images, YouTube, Google Drive, Soundcloud, articles, blogs, you name it."))+"\n        ")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.url&&!t.validUrl,expression:"url && !validUrl"}],staticClass:"small-type error-type"},[t._v(t._s(t.__("Please enter a valid link.")))])])]),t._v(" "),i("footer",{staticClass:"modal-footer"},[i("button",{staticClass:"text-button",on:{click:t.cancel}},[t._v(t._s(t.__("Cancel")))]),t._v(" "),i("button",{staticClass:"text-button",attrs:{disabled:!t.validUrl},on:{click:t.save}},[t._v(t._s(t.__("Save")))])])])])}),[],!1,null,"1e2e6044",null);e.a=l.exports},608:function(t,e,i){t.exports=i.p+"media/images/add_attachment-cc32506c94bdce447ac94382cf3812cb.svg"},611:function(t,e,i){t.exports=i.p+"media/audio/shutter-4770b3cf1bfa4a9d845ad36f7b36e9f2.mp3"},788:function(t,e,i){"use strict";var s=i(479);i.n(s).a},789:function(t,e,i){"use strict";var s=i(480);i.n(s).a},791:function(t,e,i){"use strict";var s=i(481);i.n(s).a},804:function(t,e,i){"use strict";var s=i(492);i.n(s).a},805:function(t,e,i){"use strict";var s=i(493);i.n(s).a},808:function(t,e,i){"use strict";var s=i(496);i.n(s).a},809:function(t,e,i){"use strict";var s=i(497);i.n(s).a}}]);
//# sourceMappingURL=8-954df076cf2449422b53.chunk.js.map